console.log("app is running...");var myApp=angular.module("myApp",["ngRoute","DisplayFactory","AuthFactory","LoginController","RegisterController"]);myApp.config(["$routeProvider","$locationProvider",function(e,t){e.when("/",{templateUrl:"views/_main.html",controller:"MainCtrl"}).when("/login",{templateUrl:"views/auth/_login.html",controller:"LoginCtrl"}).when("/register",{templateUrl:"views/auth/_register.html",controller:"RegisterCtrl"}).when("/reset",{templateUrl:"views/auth/_reset.html",controller:"LoginCtrl"}).otherwise("/"),t.html5Mode(!0)}]),myApp.controller("MainCtrl",["$scope",function(e){}]),myApp.controller("AuthCtrl",["$scope",function(e){}]);var LoginController=angular.module("LoginController",[]);LoginController.controller("LoginCtrl",["$scope","$http","DisplayFact","AuthFact",function(e,t,a,r){function s(t){r.loginUser(t,function(t){e.display.alert.usernamedoesntexist=!1,e.display.alert.passwordwrong=!1,t.data.success||("User not found!"==t.data.message&&(e.display.alert.usernamedoesntexist=!0),"Wrong password!"==t.data.message&&(e.display.alert.passwordwrong=!0)),t.data.success&&(e.display.page.form=!1,e.display.page.success=!0)})}e.display={page:{form:!0,success:!1},alert:{usernamedoesntexist:!1,passwordwrong:!1}},e.data={form:{username:"",password:"",rememberme:!1}},e.loginUser=s}]);var RegisterController=angular.module("RegisterController",[]);RegisterController.controller("RegisterCtrl",["$scope","$http","DisplayFact","AuthFact",function(e,t,a,r){function s(){var t=new RegExp(/^\w+@[a-zA-Z_]+\.[a-zA-Z]{2,3}$/);t.test(e.data.form.email)?e.display.alert.emailvalid=!1:e.display.alert.emailvalid=!0}function o(){e.data.form.username<5?e.display.alert.usernametooshort=!0:e.display.alert.usernametooshort=!1}function n(t,a){r.getUsers(t,function(t){e.display.alert.usernametaken=!1,e.display.alert.emailtaken=!1;for(var r=0;r<t.data.length;r++)t.data[r].username==e.data.form.username&&(e.display.alert.usernametaken=!0),t.data[r].email==e.data.form.email&&(e.display.alert.emailtaken=!0);a()})}function l(){e.data.form.password.length<8?e.display.alert.passwordlength=!0:e.display.alert.passwordlength=!1}function i(){e.data.form.password!=e.data.form.passwordconfirm?e.display.alert.passwordsmatching=!0:e.display.alert.passwordsmatching=!1}function p(){return 0==e.display.alert.emailvalid&&0==e.display.alert.emailtaken&&0==e.display.alert.usernametaken&&0==e.display.alert.usernametooshort&&0==e.display.alert.passwordlength&&0==e.display.alert.passwordsmatching?!0:!1}function u(t){o(),s(),l(),i(),n(t,function(){p()&&r.registerUser(t,function(t){t.data.success?a.showSelectedElement(e.display.page,"success"):a.showSelectedElement(e.display.page,"error")})})}e.display={page:{form:!0,success:!1,error:!1},alert:{emailvalid:!1,emailtaken:!1,usernametaken:!1,usernametooshort:!1,passwordlength:!1,passwordsmatching:!1}},e.data={form:{email:"",username:"",password:"",passwordconfirm:""}},e.registerUser=u}]);var AuthFactory=angular.module("AuthFactory",[]);AuthFactory.factory("AuthFact",["$http",function(e){function t(t,a){e.post("/auth/users",t).then(function(e){a(e)})}function a(t,a){e.post("/auth/login",t).then(function(e){a(e)})}function r(t,a){e.post("/auth/register",t).then(function(e){a(e)})}function s(t,a){e.post("/auth/reset",t).then(function(e){a(e)})}return{getUsers:t,loginUser:a,registerUser:r,resetPassword:s}}]);var DisplayFactory=angular.module("DisplayFactory",[]);DisplayFactory.factory("DisplayFact",[function(){function e(e,t){for(var a in e)a==t?e[a]=!0:e[a]=!1}return{showSelectedElement:e}}]);